# 类、类型类

#### 结构体

在说明类之前我想先聊一聊结构体。

结构体在C语言中是用来打包存储多种数据类型的数据类型，它可以在一块内存区存储多种变量，并通过一个名字来访问这些变量。

```c
//C 定义一个结构体 

struct account {
   int account_number;
   char *first_name;
   char *last_name;
   float balance;
};
struct account s;
```

简单的说，结构体就是一种可以包含多种数据类型的数据类型。

类和结构体类似，也是打包不同数据类型的数据类型，类通常由属性和方法构成，其中属性用来存储变量，方法则是函数操作。

#### 对象及其实例化

**实例和对象**

如上所述类其实就是一系列数据类型的封装，其本身也是一种数据类型。通过类声明的一个变量就叫做对象或者实例。

```java
//Java

int a;      //声明了一个Int类型的变量a，a是一个int类型的变量
Pet dog;    //声明了一个Pet类的对象dog，dog是Pet类的一个实例
```

**new运算符**

new操作符会为对象分配一块内存并返回这个内存的引用，同时它也会调用构造函数，我们把这个过程叫做实例化。接下来构造函数会对对象的属性进行初始化赋值，我们把这个过程叫做初始化。

```java
//Java 实例化类并初始化对象

Pet cat = new Pet();    //实例化cat对象
//注意Java中构造函数与类名相同，因此前一个Pet是对象的类型，后一个Pet是用来初始化对象的构造函数的名称。
```

**创建一个对象**

综上所述创建一个对象包括三个步骤

1. 声明一个类的对象
2. 通过new操作符实例化对象
3. 通过这个类的构造函数初始化对象

**类与对象的关系**

其实对象就是一系列状态和行为的打包，比如说铅笔有笔芯和笔杆（对象的状态），铅笔可以写字、画画（对象的行为）。而类是对象的模板，比如说铅笔有笔芯笔杆，可以写作绘画，油性笔也有笔芯笔杆，也可以写作绘画，像这样的有笔芯有笔杆可以写作绘画的东西就叫做笔。那么笔就是模板，铅笔、油性笔就是对象，而这个模板所打包的状态就是笔芯、笔杆，打包的动作就是写作、绘画。

```java
//Java 作为笔的类

Class Pen {
  public Refill r;
  public Shaft s;
  public void write(){};
  public void draw(){};
}
```

有了类与变量之间关系的认识，就可以更书面的说明类的定义了：

类是一个模板，它描述一类对象的行为和状态。


#### 类和变量

通常在类中有三种变量：局部变量、实例变量和类变量。

实例变量和类变量在实例函数和类函数中已经有过说明，可以通过类直接访问的变量就是类变量，一般用static关键词修饰。通过对象访问的变量是实例变量。

局部变量是指那些在函数中定义的变量，是无法通过类、对象直接访问的。

```java
//Java 类变量、实例变量和局部变量

Class Demo{  
  public static String classVariable = "类变量";
  public String instanceVariable = "实例变量";

  public static void(String args[]){
     String localVariable = "局部变量";
  }
}
```

更多关于类的概念我会在后续章节面向对象特点下详细说明。

#### 鸭子类型

在说明类型类之前，我想先介绍下Ruby语言中提出的鸭子类型概念，这样方便我们区分联系类及类型类之间的关系。

>当看到一只鸟走起来像鸭子、游泳起来像鸭子、叫起来也像鸭子，那么这只鸟就可以被称为鸭子。

鸭子类型中关注的不是对象本身是什么，而是其表现出的行为，也就是它的使用场景。还是以之前的笔为例子说明，我们用木枝在沙滩上写字绘画，很明显木枝并不是笔的一种，但是它能作为笔来使用，实现写的功能，那么这是我们就可以把木枝称作为“笔”。这就是鸭子类型的特点，不注重对象本身，而是对象其行为。

有了鸭子类型的概念我们继续下面的类型类。

#### 类型类

如果说类是Java中实现复用的重要手段，那么类型类就是Haskell中实现复用的重要手段。

类型类和鸭子类型的思维方式类似，它也强调行为功能。通常类型类描述一些列的行为，属于这个类型类的类型就实现了其定义的行为（你也可以把类型类理解为Java的接口，它是描述行为的一种抽象）。

我们来看下Haskell中函数(>)的定义：

```Haskell
--Haskell (>) 定义

(>):: (Ord a)=> a -> a -> Bool  
```
这里Ord就是一个类型类，属于Ord的类型a就具有排序的行为，这个定义说明传入两个a类型，a类型具有比较行为，进行比较运算后返回一个布尔类型。

在Haskell中除了Ord还有诸如Enum、Num、Bounded等类型类，它们分别具备成员是否连续、是否为数字、成员的上下限等行为。类型具备了类型类的行为才能实现出相等、比较、字符串转换这些运算。


#### 类、类型类、类型及类类型

这些概念放在一起确实有些容易混淆，所以我想在最后简单区分下。

类和类型类已经说明过了，类是面向对象程序中非常重要的一个概念，而类型类是Haskell语言中抽象行为的一种方式。类型就是我们这两章中在说明的概念，那么类类型是什么，很简单，就是“类 类型”。如果把类看做是声明的变量，那么类类型就是对应的类型，就像`int a`，如果a是一个类，那么int就像类类型。
